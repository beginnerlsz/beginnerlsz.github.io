---
title: 皇帝的加密
author: z1
date: 2025-09-25 17:42:26
catalog: true
tags:
  - 前端技巧
  - 加密
description: 前端加密绕过技巧总结
---

# 1. 加密场景

 1. 请求体响应体均加密


 2. 仅加密或校验请求体


 3. sign校验


 4. 更多类型

# 应对策略
1. js逆向
2. 绕过加密
    *这种场景下，只有请求体加密，响应体没有加密*（这种方法也适用于[加密场景](# 1. 加密场景)3里面的仅在请求包中加签名sign的情况）
    
    - 这种场景的越权测试--越权我们需要操作id，但是请求体加密了，此时有两种方法：
    
      1. js逆向，找到加解密函数以及参数；
    
      2. 加密绕过
    
         > 我们先分析业务流程，首先需要知道请求体的加密是由前端完成的，前端需要对数据进行加密，但是数据是存储在后端的，它一定要从后端获取到数据，然后才能加密数据。那么在这个流程中是否存在问题呢？
    
         1. 当我们使用网站某一个功能对数据进行操作的时候，前端需要知道被操作数据的ID，前端获取这个数据的id只有一个方法——请求后端；
         2. 后端接收到请求以后，将数据返回给前端（*想一下此处是否存在问题*）；
         3. 前端接收到数据id以及其他一些参数，然后调用加密函数，对这些参数以及值进行加密生成密文，然后对后端发起操作请求。
    
         以上是一次正常的流程。从这个流程中，我们可以看到，前端加密的id是由后端给的，那么我们如果想要越权操作其他数据的时候，我们不能直接改操作请求包，但是我们可以***伪造后端返回过来的数据包中返回的id***，但是前端会认为这是我们的数据的id，从而加密我们伪造的id，达到绕过前端加密。
      
         ----
      
         以上是对网站功能的操作，同样也可以利用上面的思路越权查看用户信息
      
         网站中存在`/api/getuserinfo`这样一个接口，根据接口含义推断这是获取用户信息的接口，这个接口存在加密，这是登录网站后的第一个数据包。利用这个接口越权查看用户信息
      
         既然这是***登录后*** 第一个数据包，那么登录的响应包返回给前端用户信息。那么我们只要找到这个返回包就可以对这个接口进行越权尝试了。
      
         ::: tips
      
         **提示**
      
         有的返回包中的鉴权字段可能存在于响应头中,响应体中的鉴权字段可能是无效字段
      
         :::
      
         ::: important
      
         **注意**
         
         有的站点进行越权测试的时候发现按照上述思路修改返回包后发现请求保重的鉴权字段并没有发生改变，这时候可以看一下**浏览器缓存**，有的网站会把鉴权字段存放在浏览器缓存中，从缓存中读取鉴权字段
         
         :::

# 测试思路

*对于sign站点的测试思路*

1. 判断sign检验的参数都有哪些

2. 确定需要修改的原始数据(并不是所有被校验的数据都需要修改)

3. 找原始数据来源

   数据来源如下几种

   1. 登录接口返回包
   2. 查询接口返回包
   3. 浏览器缓存

4. 来源处篡改原始数据